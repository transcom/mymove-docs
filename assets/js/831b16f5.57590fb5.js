"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[9311],{62532:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>r,contentTitle:()=>s,default:()=>u,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var n=a(45072),i=(a(11504),a(95788));a(10880);const l={},s="Database Setup",o={unversionedId:"getting-started/application-setup/database-setup",id:"getting-started/application-setup/database-setup",title:"Database Setup",description:"Run the following command to create and start a local PostgreSQL Docker container called milmove-db-dev, if it doesn\u2019t exist already:",source:"@site/docs/getting-started/application-setup/05-database-setup.md",sourceDirName:"getting-started/application-setup",slug:"/getting-started/application-setup/database-setup",permalink:"/mymove-docs/docs/getting-started/application-setup/database-setup",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/getting-started/application-setup/05-database-setup.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{},sidebar:"gettingStartedSidebar",previous:{title:"Direnv Setup",permalink:"/mymove-docs/docs/getting-started/application-setup/direnv-setup"},next:{title:"Run the App",permalink:"/mymove-docs/docs/getting-started/application-setup/run-the-app"}},r={},d=[{value:"Troubleshooting Database Setup",id:"troubleshooting-database-setup",level:2}],p={toc:d},g="wrapper";function u(e){let{components:t,...a}=e;return(0,i.yg)(g,(0,n.c)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"database-setup"},"Database Setup"),(0,i.yg)("p",null,"Run the following command to create and start a local PostgreSQL Docker container called ",(0,i.yg)("inlineCode",{parentName:"p"},"milmove-db-dev"),", if it doesn\u2019t exist already:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-bash"},"make db_dev_run\n")),(0,i.yg)("p",null,"Next, run the following command to execute all existing database migrations for the dev database. You will run this command again anytime you add new migrations to the app:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-bash"},"make db_dev_migrate\n")),(0,i.yg)("p",null,"Validate that your dev database is running:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-bash"},"psql-dev\n")),(0,i.yg)("p",null,"This puts you in a PostgreSQL shell (",(0,i.yg)("inlineCode",{parentName:"p"},"psql"),"). Here are some additional helpful commands you can run in ",(0,i.yg)("inlineCode",{parentName:"p"},"psql"),":"),(0,i.yg)("table",null,(0,i.yg)("thead",{parentName:"table"},(0,i.yg)("tr",{parentName:"thead"},(0,i.yg)("th",{parentName:"tr",align:null},"Command"),(0,i.yg)("th",{parentName:"tr",align:null},"Description"))),(0,i.yg)("tbody",{parentName:"table"},(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"\\dt")),(0,i.yg)("td",{parentName:"tr",align:null},"Shows all tables")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"\\d <table_name>")),(0,i.yg)("td",{parentName:"tr",align:null},"Describes a specific table")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:null},(0,i.yg)("inlineCode",{parentName:"td"},"\\q")),(0,i.yg)("td",{parentName:"tr",align:null},"Exits ",(0,i.yg)("inlineCode",{parentName:"td"},"psql")," shell")))),(0,i.yg)("h2",{id:"troubleshooting-database-setup"},"Troubleshooting Database Setup"),(0,i.yg)("p",null,"If you're unable to connect to the database, make sure that the version of PostgreSQL installed locally is the same version used in Docker (check the ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/transcom/mymove/blob/main/Makefile#L7"},(0,i.yg)("inlineCode",{parentName:"a"},"DB_DOCKER_CONTAINER_IMAGE")," variable in the Makefile"),")."))}u.isMDXComponent=!0}}]);