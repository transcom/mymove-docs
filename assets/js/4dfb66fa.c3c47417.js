"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[6824],{99468:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>i,metadata:()=>p,toc:()=>s});var n=a(45072),r=(a(11504),a(95788));a(10880);const i={},o="Direnv Setup",p={unversionedId:"getting-started/application-setup/direnv-setup",id:"getting-started/application-setup/direnv-setup",title:"Direnv Setup",description:"Now that you have the required dependencies installed (using Homebrew or Nix), it\u2019s time to set up direnv, a tool we use to manage local environment variables.",source:"@site/docs/getting-started/application-setup/04-direnv-setup.md",sourceDirName:"getting-started/application-setup",slug:"/getting-started/application-setup/direnv-setup",permalink:"/mymove-docs/docs/getting-started/application-setup/direnv-setup",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/getting-started/application-setup/04-direnv-setup.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{},sidebar:"gettingStartedSidebar",previous:{title:"Option 2: Setup Using Nix",permalink:"/mymove-docs/docs/getting-started/application-setup/project-setup-homebrew-vs-nix/setup-nix"},next:{title:"Database Setup",permalink:"/mymove-docs/docs/getting-started/application-setup/database-setup"}},l={},s=[{value:"Troubleshooting direnv and chamber",id:"troubleshooting-direnv-and-chamber",level:2},{value:"Optional: Helpful variables for <code>.envrc.local</code>",id:"optional-helpful-variables-for-envrclocal",level:2}],d={toc:s},m="wrapper";function c(e){let{components:t,...a}=e;return(0,r.yg)(m,(0,n.c)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"direnv-setup"},"Direnv Setup"),(0,r.yg)("p",null,"Now that you have the required dependencies installed (using ",(0,r.yg)("a",{parentName:"p",href:"/mymove-docs/docs/getting-started/application-setup/project-setup-homebrew-vs-nix/setup-homebrew"},"Homebrew")," or ",(0,r.yg)("a",{parentName:"p",href:"/mymove-docs/docs/getting-started/application-setup/project-setup-homebrew-vs-nix/setup-nix"},"Nix"),"), it\u2019s time to set up ",(0,r.yg)("a",{parentName:"p",href:"https://direnv.net/"},"direnv"),", a tool we use to manage local environment variables."),(0,r.yg)("p",null,"Run the following command from the ",(0,r.yg)("inlineCode",{parentName:"p"},"mymove")," directory:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"direnv allow\n")),(0,r.yg)("p",null,"This will load up the ",(0,r.yg)("inlineCode",{parentName:"p"},".envrc")," file. It should complain that you have missing variables. We\u2019ll fix that next."),(0,r.yg)("p",null,"To fix the missing variables issue, run the following command to let ",(0,r.yg)("inlineCode",{parentName:"p"},"direnv")," get secret values with ",(0,r.yg)("inlineCode",{parentName:"p"},"chamber")," (which was installed when you ran ",(0,r.yg)("inlineCode",{parentName:"p"},"make prereqs")," from the previous step):"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"cp .envrc.chamber.template .envrc.chamber\n")),(0,r.yg)("admonition",{type:"note"},(0,r.yg)("p",{parentName:"admonition"},"For users of the ",(0,r.yg)("inlineCode",{parentName:"p"},"fish")," shell, replace ",(0,r.yg)("inlineCode",{parentName:"p"},"direnv allow")," with ",(0,r.yg)("inlineCode",{parentName:"p"},"direnv export fish | source"),".")),(0,r.yg)("h2",{id:"troubleshooting-direnv-and-chamber"},"Troubleshooting direnv and chamber"),(0,r.yg)("p",null,"Make sure you have the latest version of Chamber that supports the\xa0",(0,r.yg)("inlineCode",{parentName:"p"},"env"),"\xa0command option. You may run into the following error if the version of Chamber you have installed does not support\xa0",(0,r.yg)("inlineCode",{parentName:"p"},"env"),". The error presents itself because of the\xa0",(0,r.yg)("inlineCode",{parentName:"p"},"chamber"),"\xa0commands that\xa0",(0,r.yg)("inlineCode",{parentName:"p"},"direnv"),"\xa0runs as part of the\xa0",(0,r.yg)("inlineCode",{parentName:"p"},".envrc.*"),"\xa0files shown above."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-bash"},'~ % cd mymove\ndirenv: loading .envrc.chamber\nError: unknown command "env" for "chamber"\nRun \'chamber --help\' for usage.\n')),(0,r.yg)("h2",{id:"optional-helpful-variables-for-envrclocal"},"Optional: Helpful variables for ",(0,r.yg)("inlineCode",{parentName:"h2"},".envrc.local")),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Increase concurrency of\xa0",(0,r.yg)("inlineCode",{parentName:"p"},"golangci-lint"),"; defaults to 6 on dev machines and to 1 in CircleCI:"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"export GOLANGCI_LINT_CONCURRENCY=8\n"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Enable go code debugging in ",(0,r.yg)("a",{parentName:"p",href:"https://www.jetbrains.com/go/promo/"},"GoLand"),":"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"export GOLAND=1\n"))),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Silence SQL logs locally; we default this to be true in\xa0",(0,r.yg)("inlineCode",{parentName:"p"},".envrc"),":"),(0,r.yg)("pre",{parentName:"li"},(0,r.yg)("code",{parentName:"pre",className:"language-bash"},"export DB_DEBUG=0\n")))))}c.isMDXComponent=!0}}]);