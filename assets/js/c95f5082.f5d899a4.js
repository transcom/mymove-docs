"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[3452],{85046:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var i=n(87462),a=(n(67294),n(3905));n(8209);const l={title:"0027 PDF Generation",description:"Decision outcome: Unknown\n"},r="PDF Generation",o={unversionedId:"adrs/pdf-generation",id:"adrs/pdf-generation",title:"0027 PDF Generation",description:"Decision outcome: Unknown\n",source:"@site/docs/adrs/0027-pdf-generation.md",sourceDirName:"adrs",slug:"/adrs/pdf-generation",permalink:"/mymove-docs/docs/adrs/pdf-generation",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/adrs/0027-pdf-generation.md",tags:[],version:"current",sidebarPosition:27,frontMatter:{title:"0027 PDF Generation",description:"Decision outcome: Unknown\n"},sidebar:"adrsSidebar",previous:{title:"0026 Use Snyk Vulnerability Scanning",permalink:"/mymove-docs/docs/adrs/use-snyk-vulnerability-scanning"},next:{title:"0028 Config Management",permalink:"/mymove-docs/docs/adrs/config-management"}},s={},p=[{value:"Considered Alternatives",id:"considered-alternatives",level:2},{value:"Generating non-editable PDFs",id:"generating-non-editable-pdfs",level:3},{value:"Merging PDFs and Images",id:"merging-pdfs-and-images",level:3},{value:"Decision Outcome",id:"decision-outcome",level:2},{value:"Generating non-editable PDFs",id:"generating-non-editable-pdfs-1",level:3},{value:"Merging PDFs and Images",id:"merging-pdfs-and-images-1",level:3},{value:"Pros and Cons of the Alternatives  optional ",id:"pros-and-cons-of-the-alternatives--optional-",level:2},{value:"Generating non-editable PDFs",id:"generating-non-editable-pdfs-2",level:3},{value:"Merging PDFs and Images",id:"merging-pdfs-and-images-2",level:3}],d={toc:p},u="wrapper";function m(e){let{components:t,...n}=e;return(0,a.kt)(u,(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"pdf-generation"},"PDF Generation"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"User Story:")," ",(0,a.kt)("em",{parentName:"p"},"[ticket/issue-number]")," "),(0,a.kt)("p",null,"MyMove will be required to generate several PDFs to provide all parties with the paperwork\nrequired by existing processes and systems. These PDFs will need to be generated programmatically,\nusing data in the application's database."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"We'd like to minimize the amount of additional infrastructure work needed to support this functionality."),(0,a.kt)("li",{parentName:"ul"},"Accordingly, we'd like to keep the solution within the existing ecosystems already in use by the project:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"Go"),(0,a.kt)("li",{parentName:"ul"},"JavaScript"),(0,a.kt)("li",{parentName:"ul"},"(as a last resort) Python 3"))),(0,a.kt)("li",{parentName:"ul"},"The generated PDFs should not be editable using standard software. Specifically, any form elements\nin the PDF should not be editable. ",(0,a.kt)("em",{parentName:"li"},"(It emerged later on that we might want to be able to generate PDFs containing fillable forms.)")),(0,a.kt)("li",{parentName:"ul"},"PDFs will also need to be created as a compilation of existing PDFs and images that have been uploaded as documentation."),(0,a.kt)("li",{parentName:"ul"},"Any libraries we adopt need to be actively maintained.")),(0,a.kt)("p",null,"In the service of identifying solutions that would satisfy these requirements (and recognizing that the combination of two\nspecialized tools might be required), we divided the problem into two parts:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Generate non-editable PDFs forms with the correct data filled out"),(0,a.kt)("li",{parentName:"ul"},"Merge multiple PDFs and images into a single PDF")),(0,a.kt)("h2",{id:"considered-alternatives"},"Considered Alternatives"),(0,a.kt)("h3",{id:"generating-non-editable-pdfs"},"Generating non-editable PDFs"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Draw the PDF form manually using a library such as ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/jung-kurt/gofpdf"},"gofpdf")),(0,a.kt)("li",{parentName:"ul"},"Create the PDF using HTML and convert it to PDF using a tool such as ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/thecodingmachine/gotenberg"},"gotenberg")),(0,a.kt)("li",{parentName:"ul"},"Use ",(0,a.kt)("a",{parentName:"li",href:"https://www.reportlab.com/"},"ReportLab")," to fill out a pre-existing PDF containing editable fields"),(0,a.kt)("li",{parentName:"ul"},"Use ",(0,a.kt)("a",{parentName:"li",href:"https://www.pdflabs.com/tools/pdftk-server/"},"PDFKit")," to fill out a pre-existing PDF containing editable fields"),(0,a.kt)("li",{parentName:"ul"},"Use ",(0,a.kt)("a",{parentName:"li",href:"https://appligent.com/server-software/fdfmerge/"},"FDFMerge")," to fill out a pre-existing PDF containing editable fields"),(0,a.kt)("li",{parentName:"ul"},"Use ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/unidoc/unidoc"},"Unidoc")," to fill out a preexisting PDF containing editable fields")),(0,a.kt)("h3",{id:"merging-pdfs-and-images"},"Merging PDFs and Images"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/thecodingmachine/gotenberg"},"gotenberg")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/unidoc/unidoc"},"Unidoc")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://poppler.freedesktop.org/"},"poppler")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/pdfcpu/pdfcpu"},"pdfcpu"))),(0,a.kt)("h2",{id:"decision-outcome"},"Decision Outcome"),(0,a.kt)("h3",{id:"generating-non-editable-pdfs-1"},"Generating non-editable PDFs"),(0,a.kt)("p",null,"Chosen alternative: Draw the PDF form manually using ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/jung-kurt/gofpdf"},"gofpdf")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Drawing PDFs in this way is a relatively straightforward process"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," An investment of a few days appeared to be enough to have an initial form fully generated"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Written in Go and requires only other Go libraries as dependencies"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Does not require a deep understanding of the PDF format"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Does not require immediate infrastructure changes to run in production"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Open source"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Requires learning a new drawing API unique to this library"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Can require a lot of code for a large PDF"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Changes to the form design will require code changes")),(0,a.kt)("h3",{id:"merging-pdfs-and-images-1"},"Merging PDFs and Images"),(0,a.kt)("p",null,"Chosen alternative: ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/pdfcpu/pdfcpu"},"pdfcpu")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Written in Go and requires only other Go libraries as dependencies"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Was able to wrap images in PDFs using our test files"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Was able to combine multiple PDFs into one using our test files"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Exposes its command line functionality through a simple Go API"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Open source"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Requires images to be converted to PDFs first before merging the resulting files together")),(0,a.kt)("h2",{id:"pros-and-cons-of-the-alternatives--optional-"},"Pros and Cons of the Alternatives "),(0,a.kt)("h3",{id:"generating-non-editable-pdfs-2"},"Generating non-editable PDFs"),(0,a.kt)("p",null,"Create the PDF using HTML and convert it to PDF using a tool such as ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/thecodingmachine/gotenberg"},"gotenberg")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Leverages the team's existing knowledge of HTML and CSS"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Does not require a deep understanding of the PDF format"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Open source"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Runs as a separate service, which will require infrastructure work to support"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Changes to the form design will require code changes"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Aligning page breaks and other formatting may be difficult")),(0,a.kt)("p",null,"Use ",(0,a.kt)("a",{parentName:"p",href:"https://www.reportlab.com/"},"ReportLab")," to fill out a pre-existing PDF containing editable fields"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Installs via Pip"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Does not require a deep understanding of the PDF format"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Has commercial support"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Open source"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Requires a commercial license"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Reportlab Account required for installation"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-"),' Does not support "active form elements" and can not fill out PDF forms'),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Would require running Python in production (it is currently only used during development and deployment)")),(0,a.kt)("p",null,"Use ",(0,a.kt)("a",{parentName:"p",href:"https://www.pdflabs.com/tools/pdftk-server/"},"PDFKit")," to fill out a pre-existing PDF containing editable fields"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Popular solution for filling out PDF forms"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Requires generating an FDF file to be merged with a PDF"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Built using ",(0,a.kt)("a",{parentName:"li",href:"https://en.wikipedia.org/wiki/GNU_Compiler_for_Java"},"GCJ"),", support for which is being removed from many Linux distributions"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Has not been updated recently, and the development plans are not publicly available"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Source is only available as an archive download"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Would require infrastructure work to deploy")),(0,a.kt)("p",null,"Use ",(0,a.kt)("a",{parentName:"p",href:"https://appligent.com/server-software/fdfmerge/"},"FDFMerge")," to fill out a pre-existing PDF containing editable fields"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Fully supports filling in PDF forms"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Has commercial support"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Requires a commercial license"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Closed source"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," OSX version is not up to date, which would complicate development"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Available only as a binary download"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Would require infrastructure work to deploy")),(0,a.kt)("p",null,"Use ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/unidoc/unidoc"},"Unidoc")," to fill out a preexisting PDF containing editable fields"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Written in Go and requires only other Go libraries as dependencies"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Open source"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Requires a commercial license"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Form functionality is very low-level, accordingly:"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Requires a deep understanding of the PDF file format")),(0,a.kt)("h3",{id:"merging-pdfs-and-images-2"},"Merging PDFs and Images"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/thecodingmachine/gotenberg"},"gotenberg")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Open source"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Runs as a separate service, which will require infrastructure work to support")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/unidoc/unidoc"},"Unidoc")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Written in Go and requires only other Go libraries as dependencies"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Open source"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Requires a commercial license"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Form functionality is very low-level, accordingly:"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Requires a deep understanding of the PDF file format")),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://poppler.freedesktop.org/"},"poppler")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"+")," Open source"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Command line program, which will require infrastructure work to support"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"-")," Requires images to be converted to PDFs first before merging the resulting files together")))}m.isMDXComponent=!0}}]);