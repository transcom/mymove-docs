"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[6856],{42956:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>i,contentTitle:()=>d,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>p});var n=t(45072),s=(t(11504),t(95788));t(10880);const o={sidebar_position:3},d="How To Backup and Restore the Development Database",r={unversionedId:"backend/setup/backup-and-restore-dev-database",id:"backend/setup/backup-and-restore-dev-database",title:"How To Backup and Restore the Development Database",description:"Backup",source:"@site/docs/backend/setup/backup-and-restore-dev-database.md",sourceDirName:"backend/setup",slug:"/backend/setup/backup-and-restore-dev-database",permalink:"/mymove-docs/docs/backend/setup/backup-and-restore-dev-database",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/backend/setup/backup-and-restore-dev-database.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"backendSidebar",previous:{title:"Common Errors and Solutions",permalink:"/mymove-docs/docs/backend/setup/common-errors-and-solutions"},next:{title:"How to Migrate the Database",permalink:"/mymove-docs/docs/backend/setup/database-migrations"}},i={},p=[{value:"Backup",id:"backup",level:2},{value:"Restore a Backup",id:"restore-a-backup",level:2},{value:"List Existing Backups",id:"list-existing-backups",level:2}],l={toc:p},c="wrapper";function u(e){let{components:a,...t}=e;return(0,s.yg)(c,(0,n.c)({},l,t,{components:a,mdxType:"MDXLayout"}),(0,s.yg)("h1",{id:"how-to-backup-and-restore-the-development-database"},"How To Backup and Restore the Development Database"),(0,s.yg)("h2",{id:"backup"},"Backup"),(0,s.yg)("p",null,"Run ",(0,s.yg)("inlineCode",{parentName:"p"},"scripts/db-backup")," to backup the ",(0,s.yg)("inlineCode",{parentName:"p"},"dev_db")," to a file on the filesystem. The backup files stored in ",(0,s.yg)("inlineCode",{parentName:"p"},"tmp/db/"),"."),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-console"},"$ scripts/db-backup clean-state\n")),(0,s.yg)("p",null,"If you'd like to backup a database other than ",(0,s.yg)("inlineCode",{parentName:"p"},"dev_db"),", specify it by setting the value of the ",(0,s.yg)("inlineCode",{parentName:"p"},"DB_NAME")," environment variable. In bash, the following command will backup ",(0,s.yg)("inlineCode",{parentName:"p"},"test_db"),":"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-console"},"$ DB_NAME=test_db scripts/db-backup clean-slate\n")),(0,s.yg)("h2",{id:"restore-a-backup"},"Restore a Backup"),(0,s.yg)("p",null,"Run ",(0,s.yg)("inlineCode",{parentName:"p"},"scripts/db-restore")," to overwrite the ",(0,s.yg)("inlineCode",{parentName:"p"},"dev_db")," database with the contents of the named backup:"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-console"},"$ scripts/db-restore clean-state\n")),(0,s.yg)("p",null,(0,s.yg)("strong",{parentName:"p"},"This is a destructive command!")," All data currently in ",(0,s.yg)("inlineCode",{parentName:"p"},"dev_db")," will be removed when this command is run."),(0,s.yg)("p",null,"If you'd like to restore to a database other than ",(0,s.yg)("inlineCode",{parentName:"p"},"dev_db"),", specify it by setting the value of the ",(0,s.yg)("inlineCode",{parentName:"p"},"DB_NAME")," environment variable. In bash, that looks like this:"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-console"},"$ DB_NAME=test_db scripts/db-restore clean-slate\n")),(0,s.yg)("h2",{id:"list-existing-backups"},"List Existing Backups"),(0,s.yg)("p",null,"When called without a backup name ",(0,s.yg)("inlineCode",{parentName:"p"},"scripts/db-restore")," will list available backups:"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-console"},"$ scripts/db-restore\nAvailable backups are:\n\n         clean-slate   6.1M   Oct 30 16:31:12\n                boom   5.9M   Oct 19 10:45:03\n")))}u.isMDXComponent=!0}}]);