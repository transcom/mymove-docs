"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[3320],{56868:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>r,toc:()=>l});var n=a(87462),i=(a(67294),a(3905));a(8209);const s={title:"0083 Deprecating `devseed` Scenarios",description:"A description for ADR 0083\n"},o="_Deprecating devseed Scenarios and use testharness Scenarios instead_",r={unversionedId:"adrs/deprecating-devseed-scenarios",id:"adrs/deprecating-devseed-scenarios",title:"0083 Deprecating `devseed` Scenarios",description:"A description for ADR 0083\n",source:"@site/docs/adrs/0083-deprecating-devseed-scenarios.md",sourceDirName:"adrs",slug:"/adrs/deprecating-devseed-scenarios",permalink:"/mymove-docs/docs/adrs/deprecating-devseed-scenarios",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/adrs/0083-deprecating-devseed-scenarios.md",tags:[],version:"current",sidebarPosition:83,frontMatter:{title:"0083 Deprecating `devseed` Scenarios",description:"A description for ADR 0083\n"},sidebar:"adrsSidebar",previous:{title:"0082 Use Flipt for Feature Flags",permalink:"/mymove-docs/docs/adrs/use-flipt-feature-flags"},next:{title:"0084 Deploy Flipt using ECS service discovery",permalink:"/mymove-docs/docs/adrs/deploy-flipt-service-discovery"}},d={},l=[{value:"Background",id:"background",level:2},{value:"Ways to create test data in MilMove",id:"ways-to-create-test-data-in-milmove",level:3},{value:"Current state of documentation related to creating test data",id:"current-state-of-documentation-related-to-creating-test-data",level:3},{value:"Considered Alternatives",id:"considered-alternatives",level:2},{value:"Decision Outcome",id:"decision-outcome",level:2},{value:"Pros and Cons of the Alternatives",id:"pros-and-cons-of-the-alternatives",level:2},{value:"<em>Do nothing</em>",id:"do-nothing",level:3},{value:"<em>Deprecate <code>devseed</code> scenarios and provide team-wide guidance on exclusively using <code>testharness</code> scenarios</em>",id:"deprecate-devseed-scenarios-and-provide-team-wide-guidance-on-exclusively-using-testharness-scenarios",level:3},{value:"<em>Deprecate and delete <code>devseed</code> scenarios (and related files in <code>pkg/testdatagen/scenario</code>) after 90 days</em>",id:"deprecate-and-delete-devseed-scenarios-and-related-files-in-pkgtestdatagenscenario-after-90-days",level:3}],m={toc:l},p="wrapper";function c(e){let{components:t,...a}=e;return(0,i.kt)(p,(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"deprecating-devseed-scenarios-and-use-testharness-scenarios-instead"},(0,i.kt)("em",{parentName:"h1"},"Deprecating ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed")," Scenarios and use ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")," Scenarios instead")),(0,i.kt)("h2",{id:"background"},"Background"),(0,i.kt)("p",null,"When working with or testing our system, it can be helpful to have sample data\nin the system that gives you good starting points for different steps in the process\nand/or seeing different features in action. There are currently two ways to create\nmoves programmatically in the MilMove system. One way is the ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," data and the\nother is the ",(0,i.kt)("inlineCode",{parentName:"p"},"testharness")," data. This ADR examines benefits of each method for\ngenerating test data in the MilMove system."),(0,i.kt)("p",null,"The main driving force behind this decision is to provide clarity to the Truss\nengineering team on which method to use when generating Move Data in the MilMove system."),(0,i.kt)("h3",{id:"ways-to-create-test-data-in-milmove"},"Ways to create test data in MilMove"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," data is only used by humans for creating pre-determined users and moves\none-time in the system. These moves are hard-coded and cannot be regenerated\nwithout a new ephemeral deployment or a new ",(0,i.kt)("inlineCode",{parentName:"p"},"make db_dev_e2e_populate")," command.\nThis way of generating data requires engineering involvement and has no\nbrowser-UI component for generating duplicate Move Data. This data was\noriginally used by Cypress end-to-end tests which were removed after being\nrefactored into Playwright tests."),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"testharness")," data is used by Playwright and can also be used by humans when\n",(0,i.kt)("strong",{parentName:"p"},"Local sign on")," is enabled for an environment. These moves are not hard-coded\nand can be generated within the browser under ",(0,i.kt)("inlineCode",{parentName:"p"},"/testharness/list")," after a\ndeployment to ephemeral or locally during development. These moves can be\ngenerated as many times as needed by the developer/user within the browser.\nSince this Move Data is also used with Playwright tests, an added benefit is\nthat the generated ",(0,i.kt)("inlineCode",{parentName:"p"},"testharness")," data can be used for both development and\nend-to-end testing."),(0,i.kt)("p",null,"Ephemeral deployments run all ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," scenarios and the time needed to complete\nan ephemeral deployment increases with every scenario we add. Currently, ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed"),"\nscenarios contain Moves that Trussels are accustomed to, e.g. ",(0,i.kt)("inlineCode",{parentName:"p"},"PENDNG"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"SITUP1"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"REWEI"),", etc.\nWhen using ",(0,i.kt)("inlineCode",{parentName:"p"},"testharness")," data these scenarios and Move Codes are generated dynamically so,\nTrussels would need to know the context of the Move Data that they are setting up.\nWithout ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," scenarios, Trussels will no longer be able to rely on reusable\nMove Locator Codes in local development or ephemeral deployments."),(0,i.kt)("h3",{id:"current-state-of-documentation-related-to-creating-test-data"},"Current state of documentation related to creating test data"),(0,i.kt)("p",null,"Our current documentation portal contains references to both ",(0,i.kt)("inlineCode",{parentName:"p"},"testharness")," and\n",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," data. If we were to pick one strategy going forward, we would have to\nupdate our documentation in a number of places."),(0,i.kt)("p",null,(0,i.kt)("a",{parentName:"p",href:"https://transcom.github.io/mymove-docs/search?q=devseed"},"=> Search results for devseed")),(0,i.kt)("p",null,"There's also documentation related to ",(0,i.kt)("inlineCode",{parentName:"p"},"make db_dev_e2e_populate")," which uses the\n",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," data as well. This documentation would need to be updated and possibly\nremoved. Currently there is no equivalent of ",(0,i.kt)("inlineCode",{parentName:"p"},"make db_dev_e2e_populate")," for the\n",(0,i.kt)("inlineCode",{parentName:"p"},"testharness")," data as the creation of Move Data with ",(0,i.kt)("inlineCode",{parentName:"p"},"testharness")," is entirely\nbrowser-UI based at this time. Along with documentation, we'll need to remove\nany Make commands and custom scripts referencing the ",(0,i.kt)("inlineCode",{parentName:"p"},"generate-test-data"),"\ncommand as well. It's possible to that ",(0,i.kt)("inlineCode",{parentName:"p"},"generate-test-data")," could be used in the\nfuture if needed."),(0,i.kt)("h2",{id:"considered-alternatives"},"Considered Alternatives"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Do nothing")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Deprecate ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed")," scenarios and provide team-wide guidance on exclusively\nusing ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")," scenarios")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("em",{parentName:"li"},"Deprecate and delete ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed")," scenarios (and related files in\n",(0,i.kt)("inlineCode",{parentName:"em"},"pkg/testdatagen/scenario"),") after 90 days"))),(0,i.kt)("h2",{id:"decision-outcome"},"Decision Outcome"),(0,i.kt)("p",null,"Deprecate and delete ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," scenarios (and related files in\n",(0,i.kt)("inlineCode",{parentName:"p"},"pkg/testdatagen/scenario"),") after 90 days on 8th of November, 2023. This will\ngive us a singular way to create test data and remove the overhead of\nmaintaining ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," data."),(0,i.kt)("p",null,"Because of the 90 day timeline, Truss engineering will have plenty of time to\nwork towards deleting the ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," scenario data and properly communicate it\nout to other practices. We will also be able to test things like deleting the\nscenarios from ephemeral deployments on a more relaxed timeline."),(0,i.kt)("p",null,"In the meantime, we will also create a new ",(0,i.kt)("inlineCode",{parentName:"p"},"DangerJS")," CI check which will warn\ncommitters that the ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," scenario data is deprecated and display a link\nback to this ADR. We will also add deprecation warnings across the various\ncommands that execute ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," scenario data that link back to this ADR and\ndisplay a warning message."),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Use the text below as inspiration for the deprecation message across our various\nautomation tooling using ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," scenario data."),(0,i.kt)("blockquote",{parentName:"admonition"},(0,i.kt)("p",{parentName:"blockquote"},"The ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," scenario data has been deprecated. Please see ADR 0083,\n",(0,i.kt)("a",{parentName:"p",href:"https://transcom.github.io/mymove-docs/docs/adrs/deprecating-devseed-scenarios"},"https://transcom.github.io/mymove-docs/docs/adrs/deprecating-devseed-scenarios")))),(0,i.kt)("p",null,"This alternative comes with a risk of ownership since it will be implemented\nduring a 90 day period."),(0,i.kt)("h2",{id:"pros-and-cons-of-the-alternatives"},"Pros and Cons of the Alternatives"),(0,i.kt)("h3",{id:"do-nothing"},(0,i.kt)("em",{parentName:"h3"},"Do nothing")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," ",(0,i.kt)("em",{parentName:"li"},"No extra work involved.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"The ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed")," scenarios are no longer used in automated testing. This can\nlead to confusing scenarios or overused scenarios when working locally.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"Teams will remain unsure about whether to use ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed")," or ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness"),"\ndata. This could lead to some confusion or duplicated work.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"Teams may duplicate work as ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")," data is required for Playwright\ntests."))),(0,i.kt)("h3",{id:"deprecate-devseed-scenarios-and-provide-team-wide-guidance-on-exclusively-using-testharness-scenarios"},(0,i.kt)("em",{parentName:"h3"},"Deprecate ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed")," scenarios and provide team-wide guidance on exclusively using ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")," scenarios")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," ",(0,i.kt)("em",{parentName:"li"},"Teams will be able to focus on data creation using ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")," data.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," ",(0,i.kt)("em",{parentName:"li"},"Teams will have ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")," data for Playwright tests that have been\nused during the development of features.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," ",(0,i.kt)("em",{parentName:"li"},"Teams will be able to create duplicate moves without having to repopulate\nthe database.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"This will change the way we create Move Data. With the ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")," method,\nindividual moves will need to be created manually.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"Communication overhead of reminding teams to transition to ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")," from ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"em"},"Devseed")," can be used to batch-create scenarios with multiple related moves, but ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")," currently only supports creation of individual moves")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"Teams would still have to maintain ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed")," data"))),(0,i.kt)("h3",{id:"deprecate-and-delete-devseed-scenarios-and-related-files-in-pkgtestdatagenscenario-after-90-days"},(0,i.kt)("em",{parentName:"h3"},"Deprecate and delete ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed")," scenarios (and related files in ",(0,i.kt)("inlineCode",{parentName:"em"},"pkg/testdatagen/scenario"),") after 90 days")),(0,i.kt)("p",null,"Most of the pro and cons from option 2 apply. Deleting the ",(0,i.kt)("inlineCode",{parentName:"p"},"devseed")," data also adds the following considerations:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," ",(0,i.kt)("em",{parentName:"li"},"90 days is enough time to properly acclimate to the new changes")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," ",(0,i.kt)("em",{parentName:"li"},"Teams would not have to maintain ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed")," data.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"+")," ",(0,i.kt)("em",{parentName:"li"},"There would be a singular way to create test data.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"During and after the 90 day period, there will need to be a way for\nTrussels to track this work.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"More work involved in implementing the ADR e.g. removing code,\ndocumentation updates, etc.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"Teams would have to adjust to using the new ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")," scenarios,\nrather than relying on existing move codes for testing")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"Teams that rely on old ",(0,i.kt)("inlineCode",{parentName:"em"},"devseed")," scenarios would need to train")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("inlineCode",{parentName:"li"},"-")," ",(0,i.kt)("em",{parentName:"li"},"Not all move scenarios or users are currently in ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness"),", so Truss\nengineers may need to recreate some of the more commonly used/expected moves\nusing ",(0,i.kt)("inlineCode",{parentName:"em"},"testharness")))))}c.isMDXComponent=!0}}]);