"use strict";(self.webpackChunkmymove_docs=self.webpackChunkmymove_docs||[]).push([[2580],{57780:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>p,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var i=n(45072),a=(n(11504),n(95788));n(10880);const o={pagination_next:"getting-started/application-setup/direnv-setup"},p="Option 2: Setup Using Nix",s={unversionedId:"getting-started/application-setup/project-setup-homebrew-vs-nix/setup-nix",id:"getting-started/application-setup/project-setup-homebrew-vs-nix/setup-nix",title:"Option 2: Setup Using Nix",description:"If you prefer to setup using Homebrew, go to Option 1: Setup Using Homebrew.",source:"@site/docs/getting-started/application-setup/03-project-setup-homebrew-vs-nix/02-setup-nix.md",sourceDirName:"getting-started/application-setup/03-project-setup-homebrew-vs-nix",slug:"/getting-started/application-setup/project-setup-homebrew-vs-nix/setup-nix",permalink:"/mymove-docs/docs/getting-started/application-setup/project-setup-homebrew-vs-nix/setup-nix",draft:!1,editUrl:"https://github.com/transcom/mymove-docs/edit/main/docs/getting-started/application-setup/03-project-setup-homebrew-vs-nix/02-setup-nix.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{pagination_next:"getting-started/application-setup/direnv-setup"},sidebar:"gettingStartedSidebar",previous:{title:"Option 1: Setup Using Homebrew",permalink:"/mymove-docs/docs/getting-started/application-setup/project-setup-homebrew-vs-nix/setup-homebrew"},next:{title:"Direnv Setup",permalink:"/mymove-docs/docs/getting-started/application-setup/direnv-setup"}},r={},l=[{value:"Initial Setup",id:"initial-setup",level:2},{value:"Clean Up Local Environment",id:"clean-up-local-environment",level:2},{value:"Install Dependencies",id:"install-dependencies",level:2},{value:"Add or Update Packages",id:"add-or-update-packages",level:2}],d={toc:l},g="wrapper";function u(e){let{components:t,...n}=e;return(0,a.yg)(g,(0,i.c)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"option-2-setup-using-nix"},"Option 2: Setup Using Nix"),(0,a.yg)("admonition",{type:"info"},(0,a.yg)("p",{parentName:"admonition"},"If you prefer to setup using Homebrew, go to ",(0,a.yg)("a",{parentName:"p",href:"/mymove-docs/docs/getting-started/application-setup/project-setup-homebrew-vs-nix/setup-homebrew"},"Option 1: Setup Using Homebrew"),".")),(0,a.yg)("h2",{id:"initial-setup"},"Initial Setup"),(0,a.yg)("p",null,"Read the overview of Nix in the ",(0,a.yg)("a",{parentName:"p",href:"https://playbook.truss.dev/docs/developing/nix"},"Truss Engineering Playbook"),", and follow the instructions in the playbook."),(0,a.yg)("h2",{id:"clean-up-local-environment"},"Clean Up Local Environment"),(0,a.yg)("p",null,"This section is only if you had previously set up any of these tools/packages. It is also optional, with the following the caveat of this note:"),(0,a.yg)("admonition",{type:"danger"},(0,a.yg)("p",{parentName:"admonition"},"If you need any of the packages/tools for other things that you won't use\xa0",(0,a.yg)("inlineCode",{parentName:"p"},"nix"),"\xa0for, you can set things up so that they both work side by side, but you'll just have to set up your\xa0",(0,a.yg)("inlineCode",{parentName:"p"},"PATH"),"\xa0properly. And even then, there may be other steps necessary which aren't documented here.")),(0,a.yg)("p",null,"Disable or uninstall ",(0,a.yg)("inlineCode",{parentName:"p"},"nodenv"),", ",(0,a.yg)("inlineCode",{parentName:"p"},"asdf"),", or any other version switchers for ",(0,a.yg)("inlineCode",{parentName:"p"},"mymove")," :"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"To disable ",(0,a.yg)("inlineCode",{parentName:"p"},"nodenv"),", remove\xa0",(0,a.yg)("inlineCode",{parentName:"p"},'eval "$(nodenv init -)"'),"\xa0from\xa0",(0,a.yg)("inlineCode",{parentName:"p"},".zshrc"),"\xa0(or your shell's config file)")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"To uninstall ",(0,a.yg)("inlineCode",{parentName:"p"},"nodenv"),", follow ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/nodenv/nodenv#uninstalling-nodenv"},"these instructions"),".")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"To uninstall ",(0,a.yg)("inlineCode",{parentName:"p"},"asdf"),", follow ",(0,a.yg)("a",{parentName:"p",href:"https://asdf-vm.com/manage/core.html#uninstall"},"these instructions"),"."),(0,a.yg)("ul",{parentName:"li"},(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"Also, remove the following lines from ",(0,a.yg)("inlineCode",{parentName:"p"},".zshrc")," (or your shell\u2019s config file):"),(0,a.yg)("pre",{parentName:"li"},(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"# remove these lines\nexport GOPATH=~/dev/go\nexport PATH=$(go env GOPATH)/bin:$PATH\n")))))),(0,a.yg)("h2",{id:"install-dependencies"},"Install Dependencies"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Install ",(0,a.yg)("inlineCode",{parentName:"li"},"mymove")," dependencies:")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-bash"},"nix-env -i aws-vault chamber direnv bash\n")),(0,a.yg)("ol",{start:2},(0,a.yg)("li",{parentName:"ol"},"Set up ",(0,a.yg)("a",{parentName:"li",href:"/mymove-docs/docs/getting-started/application-setup/prerequisites"},"AWS services"),"."),(0,a.yg)("li",{parentName:"ol"},"Follow these steps to configure direnv (which was installed in Step 1).",(0,a.yg)("ol",{parentName:"li"},(0,a.yg)("li",{parentName:"ol"},"In ",(0,a.yg)("inlineCode",{parentName:"li"},".zshrc")," (or the relevant one for you), make sure the ",(0,a.yg)("inlineCode",{parentName:"li"},"nix")," setup line (inserted by the ",(0,a.yg)("inlineCode",{parentName:"li"},"nix")," installation) is run before the ",(0,a.yg)("inlineCode",{parentName:"li"},"direnv")," hook setup."))),(0,a.yg)("li",{parentName:"ol"},"Run ",(0,a.yg)("inlineCode",{parentName:"li"},"./nix/update.sh"),"."),(0,a.yg)("li",{parentName:"ol"},"Run ",(0,a.yg)("inlineCode",{parentName:"li"},"make deps_nix"),". This will install\xa0",(0,a.yg)("inlineCode",{parentName:"li"},"pre-commit"),"\xa0hooks and frontend client dependencies. See the Pre-Commit guide for more information on how to use it.")),(0,a.yg)("h2",{id:"add-or-update-packages"},"Add or Update Packages"),(0,a.yg)("ol",null,(0,a.yg)("li",{parentName:"ol"},"Go to\xa0",(0,a.yg)("a",{parentName:"li",href:"https://ahobson.github.io/nix-package-search/#/search"},"nix-package-search")," and find the package you\u2019re looking for."),(0,a.yg)("li",{parentName:"ol"},"When you see the version of the package you want, click on the eye icon to unfold the settings."),(0,a.yg)("li",{parentName:"ol"},"Add or update the package to\xa0",(0,a.yg)("inlineCode",{parentName:"li"},"nix/default.nix"),".")))}u.isMDXComponent=!0}}]);