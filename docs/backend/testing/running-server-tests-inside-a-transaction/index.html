<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-backend/testing/running-server-tests-inside-a-transaction">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Running server tests inside a transaction | MilMove Developer Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://transcom.github.io/mymove-docs/docs/backend/testing/running-server-tests-inside-a-transaction"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Running server tests inside a transaction | MilMove Developer Portal"><meta data-rh="true" name="description" content="When our tests run, we often need to clear the database between tests so we can have a clean slate."><meta data-rh="true" property="og:description" content="When our tests run, we often need to clear the database between tests so we can have a clean slate."><link data-rh="true" rel="icon" href="/mymove-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://transcom.github.io/mymove-docs/docs/backend/testing/running-server-tests-inside-a-transaction"><link data-rh="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/backend/testing/running-server-tests-inside-a-transaction" hreflang="en"><link data-rh="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/backend/testing/running-server-tests-inside-a-transaction" hreflang="x-default"><link rel="stylesheet" href="/mymove-docs/assets/css/styles.65849403.css">
<link rel="preload" href="/mymove-docs/assets/js/runtime~main.cb78340e.js" as="script">
<link rel="preload" href="/mymove-docs/assets/js/main.70764974.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mymove-docs/"><div class="navbar__logo"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">MilMove Documentation</b></a><a class="navbar__item navbar__link" href="/mymove-docs/docs/about/">About</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/adrs">ADRs</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/frontend">Frontend</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mymove-docs/docs/backend">Backend</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/integrations">Integrations</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/api">API</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/tools">Tools</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/help/index">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">mymove<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mymove-docs/docs/backend">MilMove Backend</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/mymove-docs/docs/backend/testing/acceptance-testing-syncada-edi-invoicing">Testing</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/acceptance-testing-syncada-edi-invoicing">Acceptance testing Syncada</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/acceptance-testing-notifications">Acceptance testing notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/acceptance-testing-payment-requests">Acceptance testing payment requests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/run-acceptance-tests">How to run acceptance tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/run-e2e-tests">How to run end to end (Cypress) tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/run-go-tests">How to run Go tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/how-to-write-fast-tests">How to write fast tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/interacting-with-the-db-in-go-server-tests">Interacting with the database in Go server tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mymove-docs/docs/backend/testing/running-server-tests-inside-a-transaction">Running server tests inside a transaction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/test-data-generation">Test data generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/testing-best-practices">Testing best practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/testing-payment-requests-for-domestic-sit-service-items">Testing payment requests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/understanding-testdatagen-functions">Understanding testdatagen functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/factory-test-data-generation">Factory Test Data Generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/manually-run-prime-api-for-slice-demo">Manually run Prime API for Slice demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/testing-handlers">testing-handlers</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/mymove-docs/docs/backend/guides/service-objects/overview">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/mymove-docs/docs/backend/setup/configure-postico-or-tableplus-to-connect-to-mymove-db">Setup</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/mymove-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Testing</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Running server tests inside a transaction</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Running server tests inside a transaction</h1><p>When our tests run, we often need to clear the database between tests so we can have a clean slate.</p><p>In our old coding pattern, this wasn&#x27;t enforced so there were lots of dependencies between tests, which is not a good pattern. Tests should be isolated from each other.</p><p>If we did clear the database, we were using <code>TruncateAll()</code> to delete all records in the database, which is slow.</p><p>For those reasons, as of June 2021, we have a new coding pattern that will use <a href="https://www.geeksforgeeks.org/postgresql-transactions/" target="_blank" rel="noopener noreferrer">transactions</a> to clear the database between tests and manage database connections in a more optimized fashion.</p><p>Read more for <a href="#background">background</a> on this.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-update-a-test-to-the-new-pattern">How to update a test to the new pattern<a href="#how-to-update-a-test-to-the-new-pattern" class="hash-link" aria-label="Direct link to How to update a test to the new pattern" title="Direct link to How to update a test to the new pattern">​</a></h2><p>First let&#x27;s look at the old pattern. The subtests often relied on db records that were created in the  <code>TEST SETUP</code> section. Sometimes, a later subtest would even rely on a change from an earlier subtest.</p><p><strong>Old pattern:</strong></p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">func (suite *MTOShipmentServiceSuite) TestMTOShipmentUpdater() {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // TEST SETUP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // Set up mocked objects and other local (non-db) variables</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // Prepare the database with testdatagen and suite.DB() calls</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    suite.T().Run(&quot;Subtest 1&quot;, func(t *testing.T) {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        // Run Test</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        // Check errors</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    })</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    suite.T().Run(&quot;Subtest 2&quot;, func(t *testing.T) {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        // Run Test</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        // Check errors</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    })  </span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In our new pattern, the database will be cleaned for each subtest. So we can&#x27;t rely on any db records changed in the <code>TEST SETUP</code> section, or any db records changed in previous subtests. We need to put all that setup into a function, called <code>setupTestData</code> here, and call that in each subtest.</p><p><strong>New Pattern</strong>:</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">func (suite *MTOShipmentServiceSuite) TestMTOShipmentUpdater() {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // TEST SETUP</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // Set up mocked objects and other local (non-db) variables</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    // MOVE DB SETUP TO A FUNCTION</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    setupTestData := func() {  </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        // Prepare the database with testdatagen and suite.DB() calls</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    suite.Run(&quot;Subtest 1&quot;, func() {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        setupTestData()    // &lt;-- Call the DB setup function</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        // Run Test</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        // Check errors</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    suite.Run(&quot;Subtest 2&quot;, func() {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        setupTestData()  </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        // Run Test</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        // Check errors</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="whats-different">What&#x27;s different<a href="#whats-different" class="hash-link" aria-label="Direct link to What&#x27;s different" title="Direct link to What&#x27;s different">​</a></h3><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>View in PR</div><div class="admonitionContent_S0QG"><p>You can see these <a href="https://github.com/transcom/mymove/pull/6650/commits/3baaff02ffa8ca745ffb9c75422a1598180635ec#diff-a9eeef9ef97657c461ec7c76226f6c6f5dd03b4938217e4ed0de9bbbfe161815" target="_blank" rel="noopener noreferrer">changes in a PR</a> if you prefer.</p></div></div><p>Follow these directions</p><ol><li><p>The function declaration for the main test needs to be simplified.</p><ul><li><code>suite.T().Run</code> → <code>suite.Run</code></li><li><code>func(t *testing.T)</code> → <code>func()</code></li></ul><p>From:</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"> suite.T().Run(&quot;Subtest 1&quot;, func(t *testing.T) {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To:</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"> suite.Run(&quot;Subtest 1&quot;, func() {</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>All DB setup should be moved to a function that is called in each subtest. There are more than one ways of achieving this, the following is just one example.</p><div class="language-golang codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-golang codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"> // MOVE DB SETUP TO A FUNCTION</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> setupTestData := func() {  </span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">     // Prepare the database with testdatagen and suite.DB() calls</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> suite.Run(&quot;Subtest 1&quot;, func() {</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">     setupTestData()    // &lt;-- Call the DB setup function</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">     // Run Test</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">     // Check errors</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"> }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p>Remove any calls to <code>suite.TruncateAll()</code> in the tests.</p></li><li><p>Replace <code>suite.T().Fatalf</code> or <code>suite.T().Fatal</code> with <code>suite.Fail</code>.</p></li><li><p>Remove <code>testing</code> from the imports at the top of the file.</p></li><li><p>Run all tests in the package.</p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-update-the-package-to-the-new-pattern">How to update the package to the new pattern<a href="#how-to-update-the-package-to-the-new-pattern" class="hash-link" aria-label="Direct link to How to update the package to the new pattern" title="Direct link to How to update the package to the new pattern">​</a></h2><p>Hopefully the package  you are working on has already been updated to use the new pattern.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-if-package-has-been-updated"><strong>Check if package has been updated</strong><a href="#check-if-package-has-been-updated" class="hash-link" aria-label="Direct link to check-if-package-has-been-updated" title="Direct link to check-if-package-has-been-updated">​</a></h3><p>To check, navigate to the file that sets up testing for the package, usually it is located at <code>&lt;path_to_package&gt;/api_test.go</code></p><p>For example, for the ghcapi package, the file is in <code>pkg/handlers/ghcapi/api_test.go</code>.</p><p>Search for the new option <code>testingsuite.WithPerTestTransaction()</code>.</p><p>If it does not exist in the file, you should update the package.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="update-the-package-to-use-the-faster-testing-setup"><strong>Update the package to use the faster testing setup</strong><a href="#update-the-package-to-use-the-faster-testing-setup" class="hash-link" aria-label="Direct link to update-the-package-to-use-the-faster-testing-setup" title="Direct link to update-the-package-to-use-the-faster-testing-setup">​</a></h3><p>You need to make two changes to this file.</p><ol><li>Update the package testing suite to use the new option - which is called <code>testingsuite.WithPerTestTransaction()</code></li></ol><p><img loading="lazy" alt="Fix package to use transaction option" src="/mymove-docs/assets/images/txn-update-package-option-bb15d85e41767727ce1d4cac210b8699.png" width="911" height="385" class="img_ev3q"></p><ol start="2"><li><p>Remove calls to <code>TruncateAll()</code>. <code>TruncateAll</code> empties the database and we no longer have to do this since we use the magic of transactions.</p><p>You can also remove the function SetupTest if all it did was call <code>TruncateAll()</code> and <code>suite.FatalNoError(err)</code></p></li></ol><p><img loading="lazy" alt="Remove TruncateAll" src="/mymove-docs/assets/images/txn-delete-setuptest-a64e4ba084703ca6db4d8ca97a5077bc.jpg" width="913" height="253" class="img_ev3q"></p><ol start="3"><li><p>Update the tests to remove <code>TruncateAll()</code></p><p>Now&#x27;s a good time to remove all calls to <code>TruncateAll()</code> from the tests in this package too!</p></li></ol><p><img loading="lazy" alt="Remove TruncateAll from tests" src="/mymove-docs/assets/images/txn-truncate-all-096e1efc78e23e74291ff0cce3ebecb1.jpg" width="913" height="212" class="img_ev3q"></p><ol start="4"><li>Run the tests and see if any fail. If none fail, then you are done! If tests fail, read below to fix them.</li></ol><p><strong>Done! The package is now setup for faster tests. Thank you.</strong></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="my-tests-started-failing-after-making-these-changes">My tests started failing after making these changes<a href="#my-tests-started-failing-after-making-these-changes" class="hash-link" aria-label="Direct link to My tests started failing after making these changes" title="Direct link to My tests started failing after making these changes">​</a></h3><p>If you use <code>Suite.Run</code>:</p><ul><li><p>This could be because each subtest is sharing DB setup. Check that you have extracted <strong>all the shared db setup</strong> into a separate function, and call that function at the beginning of each subtest. A tip is to look for <code>suite.DB()</code>. The call to <code>suite.DB()</code> performs some of the setup to handle the per test transactions, so any call to <code>suite.DB()</code> (even if you&#x27;re creating a stubbed object) should be moved from the parent test. </p><p>  Look at the diff of <code>pkg/handlers/ghcapi/orders_test.go</code> in <a href="https://github.com/transcom/mymove/pull/8676/files#diff-afe14b5268a7dd9637cc140a082e29a7c61632a71fb43f32dd6402efe22e64a2" target="_blank" rel="noopener noreferrer">this example</a>.</p></li><li><p>If the shared setup was already in a separate function, it could just be a matter of calling the setup function at the beginning of each subtest. <a href="https://github.com/transcom/mymove/pull/6650/commits/dc6d5805a104d10463a7fd5382d43a598b6626a8" target="_blank" rel="noopener noreferrer">Here&#x27;s an example</a>.</p></li><li><p>If you&#x27;ve properly extracted the DB setup, it&#x27;s possible a subtest was depending on the previous subtest. This is not a good pattern, try to unwind that dependency. Each test should pass in isolation from each other.</p></li><li><p>Remove any calls to <code>suite.TruncateAll()</code> in the tests. Here&#x27;s an example of <a href="https://github.com/transcom/mymove/pull/6650/commits/3378f4c932d35f1cce58888d3a4f617af53df2d1#diff-3f780d99e8fc416373c42acd25dcdcb5a4bfdd85ddd03795b5a72c0a03c07d06" target="_blank" rel="noopener noreferrer">how the models tests were converted to use transactions</a>.</p></li><li><p>Replace <code>suite.T().Fatalf</code> with <code>suite.Fail</code>.</p></li><li><p>If the issue is related to appContext, make sure to get the correct appContext inside the subtest using <code>suite.AppContextForTest()</code>.</p></li><li><p>If you were using <code>t</code> from the passed in <code>t *testing.T</code>, use <code>suite.T()</code> instead.</p></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="i-cant-extract-the-db-setup-into-a-function-should-i-undo-everything">I can&#x27;t extract the db setup into a function, should I undo everything?<a href="#i-cant-extract-the-db-setup-into-a-function-should-i-undo-everything" class="hash-link" aria-label="Direct link to I can&#x27;t extract the db setup into a function, should I undo everything?" title="Direct link to I can&#x27;t extract the db setup into a function, should I undo everything?">​</a></h3><p>Sometimes, it&#x27;s too much of refactor to pull out all the setup, or the setup takes a very long time.</p><p>In these cases, you can use <code>suite.PreloadData</code>. This can only be called once per test and will set up data that will then be used by all subtests. Once it is called, it will set a savepoint from which all subtests will start. When a subtests ends, the db will rollback to the savepoint. This way, each subtest can reuse the preloaded data, but subtests cannot modify the data used by another test. In most situations, it is preferrable to extract db setup into a setup function.</p><p><code>PreloadData</code> can be preferred in one case:</p><ul><li>Where there is a large amount of necessary setup, like populating the rate engine for payment calculations. In this case it can be valuable to have a preloaded setup.</li></ul><p>So <strong>if you absolutely must</strong> use <code>PreloadData</code>, the process is easy. Create a <code>suite.PreloadData</code> function and do all your test setup inside. <a href="https://github.com/transcom/mymove/blob/c4f7df208f4b63fd85b0cd7645156a3516902027/pkg/rateengine/nonlinehaul_test.go#L188" target="_blank" rel="noopener noreferrer">Here&#x27;s an example</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h2><p>In June 2021, we introduced the <a href="https://github.com/DATA-DOG/go-txdb" target="_blank" rel="noopener noreferrer">go-txdb</a> tool to allow us to run tests within a transaction, and then roll back the transaction after the test. This allows each test to start with a clean DB state, and is much faster than truncating the DB, which is how we&#x27;ve been resetting the DB all this time. Here is the PR that introduced transactions in tests: <a href="https://github.com/transcom/mymove/pull/6650" target="_blank" rel="noopener noreferrer">https://github.com/transcom/mymove/pull/6650</a></p><p>The original PR was designed in a non-breaking way such that existing tests that still use truncation can continue to run. The idea was to make the transaction feature opt-in, and incrementally update each package to use transactions. The PR updated several packages to give examples of what it takes to start using transactions. Follow the steps below to convert more packages.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>About running tests in code editor or IDE</div><div class="admonitionContent_S0QG"><p>Before you start running tests in Goland or other editor, make sure to run <code>make
server_test_setup</code> first.</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-data-setup-has-to-be-repeated-within-each-subtest">Why data setup has to be repeated within each subtest<a href="#why-data-setup-has-to-be-repeated-within-each-subtest" class="hash-link" aria-label="Direct link to Why data setup has to be repeated within each subtest" title="Direct link to Why data setup has to be repeated within each subtest">​</a></h3><p>In <code>pkg/testingsuite/pop_suite.go</code>, we created our own <code>Run</code> function that overrides the default testify <code>suite.Run</code> to ensure that the test DB is torn down for per-transaction tests.</p><p>It would be nice if subtests could start a new transaction inside
the current connection so they could reuse db setup between
subtests. Unfortunately, because <code>database/sql</code> and <code>pop</code> do not
support nested transactions, this gets complicated and hairy
quickly. When testing that approach, connections wouldn&#x27;t get
closed and cause other tests to hang or subtests would report
incorrect errors about transactions already being closed.</p><p>And so, if per test transaction is enabled, each subtest gets a new
connection. This means subtests are really just like main tests,
but subtests are a helpful way to group tests together, which can
be useful. Therefore, shared setup has to be moved to a function that can be run once
per subtest. In testing this approach, it was still faster with per test
transactions than the old way of cloning a DB per package.</p><p>If tests require a really large amount of data setup, you can use <code>suite.PreloadData</code>. If <code>PreloadData</code> is called, all subtests will start with the data that was set up in <code>PreloadData</code>, but subtests won&#x27;t be able to modify the data used by another test. </p><p>Note that any call to <code>suite.DB()</code> needs to be in a <code>setupTestData</code> function, <code>suite.PreloadData</code>, or in a subtest.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="updatingadding-to-existing-tests-that-use-transactions">Updating/adding to existing tests that use transactions<a href="#updatingadding-to-existing-tests-that-use-transactions" class="hash-link" aria-label="Direct link to Updating/adding to existing tests that use transactions" title="Direct link to Updating/adding to existing tests that use transactions">​</a></h2><p>Make a note of how the tests are set up, and follow the existing patterns, such as using <code>suite.Run</code>, and calling the shared DB setup function within each new subtest you add, where applicable.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/transcom/mymove-docs/edit/main/docs/backend/testing/running-server-tests-inside-a-transaction.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/mymove-docs/docs/backend/testing/interacting-with-the-db-in-go-server-tests"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Interacting with the database in Go server tests</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mymove-docs/docs/backend/testing/test-data-generation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Test data generation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-update-a-test-to-the-new-pattern" class="table-of-contents__link toc-highlight">How to update a test to the new pattern</a><ul><li><a href="#whats-different" class="table-of-contents__link toc-highlight">What&#39;s different</a></li></ul></li><li><a href="#how-to-update-the-package-to-the-new-pattern" class="table-of-contents__link toc-highlight">How to update the package to the new pattern</a><ul><li><a href="#check-if-package-has-been-updated" class="table-of-contents__link toc-highlight"><strong>Check if package has been updated</strong></a></li><li><a href="#update-the-package-to-use-the-faster-testing-setup" class="table-of-contents__link toc-highlight"><strong>Update the package to use the faster testing setup</strong></a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#my-tests-started-failing-after-making-these-changes" class="table-of-contents__link toc-highlight">My tests started failing after making these changes</a></li><li><a href="#i-cant-extract-the-db-setup-into-a-function-should-i-undo-everything" class="table-of-contents__link toc-highlight">I can&#39;t extract the db setup into a function, should I undo everything?</a></li></ul></li><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a><ul><li><a href="#why-data-setup-has-to-be-repeated-within-each-subtest" class="table-of-contents__link toc-highlight">Why data setup has to be repeated within each subtest</a></li></ul></li><li><a href="#updatingadding-to-existing-tests-that-use-transactions" class="table-of-contents__link toc-highlight">Updating/adding to existing tests that use transactions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/about">About MilMove</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/adrs">Architecture Decision Records</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contributing</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/frontend">Frontend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/backend">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/tools">Tools</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/transcom/mymove-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">MilMove Documentation GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="footer__link-item">MilMove GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://6130eb5cde15830007fdf57b--docusaurus-2.netlify.app/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus Official Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright 2023  U.S. Federal Government (in countries where recognized) and TrussWorks. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mymove-docs/assets/js/runtime~main.cb78340e.js"></script>
<script src="/mymove-docs/assets/js/main.70764974.js"></script>
</body>
</html>