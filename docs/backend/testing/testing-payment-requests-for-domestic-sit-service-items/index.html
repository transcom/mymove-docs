<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-backend/testing/testing-payment-requests-for-domestic-sit-service-items">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Testing payment requests | MilMove Developer Portal</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://transcom.github.io/mymove-docs/docs/backend/testing/testing-payment-requests-for-domestic-sit-service-items"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Testing payment requests | MilMove Developer Portal"><meta data-rh="true" name="description" content="Storage In Transit (SIT) pricing is composed of the following three elements:"><meta data-rh="true" property="og:description" content="Storage In Transit (SIT) pricing is composed of the following three elements:"><link data-rh="true" rel="icon" href="/mymove-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://transcom.github.io/mymove-docs/docs/backend/testing/testing-payment-requests-for-domestic-sit-service-items"><link data-rh="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/backend/testing/testing-payment-requests-for-domestic-sit-service-items" hreflang="en"><link data-rh="true" rel="alternate" href="https://transcom.github.io/mymove-docs/docs/backend/testing/testing-payment-requests-for-domestic-sit-service-items" hreflang="x-default"><link rel="stylesheet" href="/mymove-docs/assets/css/styles.65849403.css">
<link rel="preload" href="/mymove-docs/assets/js/runtime~main.cb78340e.js" as="script">
<link rel="preload" href="/mymove-docs/assets/js/main.70764974.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mymove-docs/"><div class="navbar__logo"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/mymove-docs/img/logo.svg" alt="MilMove Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">MilMove Documentation</b></a><a class="navbar__item navbar__link" href="/mymove-docs/docs/about/">About</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/adrs">ADRs</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/frontend">Frontend</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mymove-docs/docs/backend">Backend</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/integrations">Integrations</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/api">API</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/tools">Tools</a><a class="navbar__item navbar__link" href="/mymove-docs/docs/help/index">Help</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">mymove<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/mymove-docs/docs/backend">MilMove Backend</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/mymove-docs/docs/backend/testing/acceptance-testing-syncada-edi-invoicing">Testing</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/acceptance-testing-syncada-edi-invoicing">Acceptance testing Syncada</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/acceptance-testing-notifications">Acceptance testing notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/acceptance-testing-payment-requests">Acceptance testing payment requests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/run-acceptance-tests">How to run acceptance tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/run-e2e-tests">How to run end to end (Cypress) tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/run-go-tests">How to run Go tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/how-to-write-fast-tests">How to write fast tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/interacting-with-the-db-in-go-server-tests">Interacting with the database in Go server tests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/running-server-tests-inside-a-transaction">Running server tests inside a transaction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/test-data-generation">Test data generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/testing-best-practices">Testing best practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mymove-docs/docs/backend/testing/testing-payment-requests-for-domestic-sit-service-items">Testing payment requests</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/understanding-testdatagen-functions">Understanding testdatagen functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/factory-test-data-generation">Factory Test Data Generation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/manually-run-prime-api-for-slice-demo">Manually run Prime API for Slice demo</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mymove-docs/docs/backend/testing/testing-handlers">testing-handlers</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/mymove-docs/docs/backend/guides/service-objects/overview">Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/mymove-docs/docs/backend/setup/configure-postico-or-tableplus-to-connect-to-mymove-db">Setup</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/mymove-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Testing</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Testing payment requests</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Testing payment requests</h1><p>Storage In Transit (SIT) pricing is composed of the following three elements:</p><ul><li>SIT First Day: Covers the warehouse and handing in/out costs (but not transit).</li><li>SIT Add’l Days: After the first day, a daily rate is charged for ongoing storage.</li><li>SIT Pickup/Delivery: The cost of picking up or delivering a shipment in/out of SIT.</li></ul><p>There are two types of SIT -- Origin SIT and Destination SIT, depending on whether SIT is being used at the origin or destination of the move.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="domestic-sit-service-items">Domestic SIT service items<a href="#domestic-sit-service-items" class="hash-link" aria-label="Direct link to Domestic SIT service items" title="Direct link to Domestic SIT service items">​</a></h3><ul><li><strong>DOFSIT</strong> - Domestic origin 1st day SIT</li><li><strong>DOASIT</strong> - Domestic origin Additional day SIT</li><li><strong>DOPSIT</strong> - Domestic origin SIT pickup</li><li><strong>DDFSIT</strong> - Domestic destination 1st day SIT</li><li><strong>DDASIT</strong> - Domestic destination Additional day SIT</li><li><strong>DDDSIT</strong> - Domestic destination SIT delivery</li></ul><p>This page will walk you through creating and pricing a move with SIT service items.</p><h1>Choosing a pricing scenario</h1><p>Origin SIT pickup (DOPSIT) and Destination SIT delivery (DDDSIT) service items are priced in 3 different ways, depending on the &quot;original&quot; and &quot;actual&quot; ZIP3 (a ZIP3 is the first 3 digits of a ZIP code). See the <a href="https://docs.google.com/document/d/1jRl91aslMnOMt2zS1tt_XT0lD1I-xvsiKOfprAaFrAs/edit#heading=h.qvz570f9mzig" target="_blank" rel="noopener noreferrer">pricing notes doc</a> for details.</p><p>The 3 scenarios are:</p><ul><li>ZIP3 to same ZIP3</li><li>ZIP3 to different ZIP3 and &gt; 50 miles</li><li>ZIP3 to different ZIP3 and &lt;= 50 miles</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="distance-calculation">Distance calculation<a href="#distance-calculation" class="hash-link" aria-label="Direct link to Distance calculation" title="Direct link to Distance calculation">​</a></h2><p>DTOD is used to calculate distances within the same ZIP3, and Rand McNally is used for other distance calculations.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="where-do-i-put-these-zips">Where do I put these ZIPs?<a href="#where-do-i-put-these-zips" class="hash-link" aria-label="Direct link to Where do I put these ZIPs?" title="Direct link to Where do I put these ZIPs?">​</a></h2><p>For both types of SIT, the original ZIP comes from an address entered by the service member when creating their shipment, and the actual ZIP is set by the prime.
For Origin SIT, the original ZIP comes from the pickup address on the shipment (<code>mto_shipments.pickup_address_id</code>), and the actual address is sent in the <code>sitHHGActualOrigin</code> field when creating the DOFSIT service item.
For Destination SIT, the original ZIP comes from the destination address on the shipment (<code>mto_shipments.destination_address_id</code>), and the actual address is sent in the <code>sitDestinationFinalAddress</code> field when updating the DDDSIT service item.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="example-zip-codes-for-testing">Example ZIP codes for testing<a href="#example-zip-codes-for-testing" class="hash-link" aria-label="Direct link to Example ZIP codes for testing" title="Direct link to Example ZIP codes for testing">​</a></h2><ul><li>close to Fort Gordon (useful when testing Destination SIT)<ul><li>ZIP3 to same ZIP3<ul><li>from: Fort Gordon, GA 30905</li><li>to: Augusta, GA 30909</li></ul></li><li>ZIP3 to different ZIP3 and &gt; 50 miles<ul><li>from: Aberdeen Proving Ground, MD, 21005</li><li>to: Fort Gordon, GA 30813</li></ul></li><li>ZIP3 to different ZIP3 and &lt;= 50 miles<ul><li>from: Fort Gordon, GA 30905</li><li>to: Fort Gordon, GA 30813</li></ul></li></ul></li><li>close to Fort Irwin (useful when testing Origin SIT)<ul><li>ZIP3 to same ZIP3<ul><li>from: Fort Irwin, CA 92310</li><li>to: Baker, CA 92309</li></ul></li><li>ZIP3 to different ZIP3 and &gt; 50 miles<ul><li>from: Fort Irwin, CA 92310</li><li>to: Henderson, NV 89002</li></ul></li><li>ZIP3 to different ZIP3 and &lt;= 50 miles<ul><li>from: Beverly Hills, CA 90210</li><li>to: Long Beach, CA 90803</li></ul></li></ul></li></ul><h1>Initial move setup from scratch</h1><p>Before you can add SIT service items to a move, you have to set up a move and get it ready for the Prime.
Create an account for a new service member and create a new HHG move with a shipment. The origin duty station&#x27;s GBLOC must be in the same GBLOC as the office user you look at it with (see <a href="/mymove-docs/docs/frontend/testing/how-to-view-a-move-or-payment-request-in-the-office-app-as-a-too-or-tio">this Wiki page</a> for more details). Take note of the move locator on the last page.</p><p>For Origin SIT, choose a pickup address with a ZIP that fits your chosen pricing scenario.</p><p>For Destination SIT, choose a delivery address with a ZIP that fits your chosen pricing scenario. If the destination duty station ZIP fits, you can opt to use that instead of entering a delivery address.</p><p>Go to the office app (<a href="http://officelocal:3000" target="_blank" rel="noopener noreferrer">local</a>, <a href="https://office.stg.move.mil/" target="_blank" rel="noopener noreferrer">staging</a>) and find the move you just created via the move locator. Go to the orders and set any empty fields like TAC/SAC. Go ahead and approve the move and the default service items for shipment management and counseling fees.</p><p>Now let&#x27;s use the pricing-acceptance script to handle some of the usual things like updating dates/weights that the prime would be doing.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain">rm bin/prime-api-client</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">make bin/prime-api-client</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"># local</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">pricing-acceptance &lt;insert move ID&gt; local</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"># staging</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">pricing-acceptance &lt;insert move ID&gt; api.stg.move.mil</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that this script can create destination SIT service items (DDFSIT, DDASIT, DDDSIT), but it will not update the DDDSIT item with <code>sitDestinationFinalAddress</code>. It will also create a payment request.
Depending on what you are testing, you may want to stop the demo script with <code>ctrl-c</code> before one or both of these steps.</p><ul><li>If you are testing destination SIT, and <strong>don&#x27;t</strong> intend to set a final address, you can run the script to the end.</li><li>If you are testing destination SIT, and you <strong>do</strong> intend to set a final address, you can stop the script when it prompts to create a payment request</li><li>If you do not want to create destination SIT service items, kill the script when it prompts to create a DDFSIT service item.</li></ul><h1>Creating SIT service items</h1><p>When you create the first day SIT service items, additional days and pickup/delivery service items will be created automatically.
So if you add a DOFSIT service item, you&#x27;ll also get a DOASIT and a DOPSIT, and if you add a DDFSIT, you&#x27;ll get a DDASIT and a DDDSIT.</p><p>When creating origin SIT service items, we can send the new pickup address in the payload for creating the DOFSIT service item.</p><p>For destination SIT, after creating the service items, you use update-mto-service-item to add the new delivery address to the DDDSIT service item.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-origin-sit-service-items">Create Origin SIT service items<a href="#create-origin-sit-service-items" class="hash-link" aria-label="Direct link to Create Origin SIT service items" title="Direct link to Create Origin SIT service items">​</a></h2><p><em>Skip this section if you are only testing Destination SIT</em></p><p>If necessary, you can use the move locator to look up the moveTaskOrderID and the mtoShipmentID:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"># local</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --insecure fetch-mto-updates | jq --arg moveCode &lt;insert move locator&gt; &#x27;map(select(.moveCode == $moveCode)) | .[0] | {moveTaskOrderID: .id, mtoShipmentID: .mtoShipments[0].id}&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"># staging</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --cac --hostname api.stg.move.mil --port 443 fetch-mto-updates | jq --arg moveCode &lt;insert move locator&gt; &#x27;map(select(.moveCode == $moveCode)) | .[0] | {moveTaskOrderID: .id, mtoShipmentID: .mtoShipments[0].id}&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Make a payload file for creating the DOFSIT service item:</p><p><code>create_dofsit_service_item.json</code></p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token property" style="color:#5a9bcf">&quot;body&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;moveTaskOrderID&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;bc561acb-0cae-43f7-a1a8-393067ffcc56&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;mtoShipmentID&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;22267602-d1b8-45e8-a95e-ec61bc728a13&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;modelType&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;MTOServiceItemOriginSIT&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;reServiceCode&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;DOFSIT&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;sitPostalCode&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;00000&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;reason&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;my address changed&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;sitEntryDate&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;2021-01-13&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;sitHHGActualOrigin&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token property" style="color:#5a9bcf">&quot;streetAddress1&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;20245 4th St&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token property" style="color:#5a9bcf">&quot;city&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;New Braunfels&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token property" style="color:#5a9bcf">&quot;state&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;TX&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token property" style="color:#5a9bcf">&quot;postalCode&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;78130&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token property" style="color:#5a9bcf">&quot;country&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;United States&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Update <code>moveTaskOrderID</code> and <code>mtoShipmentID</code> to match your move.
Update <code>sitEntryDate</code> to something plausible.
<code>sitHHGActualOrigin</code> is used as the &quot;actual&quot; address for pricing, so set this according to your pricing scenario.</p><p>Note: <code>sitPostalCode</code> is not currently used (and may be removed), but for now, it must be present and must pass ZIP validations.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"># local</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --insecure create-mto-service-item --filename create_dofsit_service_item.json</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"># staging</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --cac --hostname api.stg.move.mil --port 443 create-mto-service-item --filename create_dofsit_service_item.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Approve the new service items from the TOO interface, and proceed to making a payment request.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-destination-sit-service-items">Create Destination SIT service items<a href="#create-destination-sit-service-items" class="hash-link" aria-label="Direct link to Create Destination SIT service items" title="Direct link to Create Destination SIT service items">​</a></h2><p><em>Skip this section if you are only testing Origin SIT</em></p><p>Start by adding a DDFSIT (destination first day SIT) to the move. This will also cause DDASIT and DDDSIT service items to be added automatically. You&#x27;ll need the moveTaskOrderID and the shipmentID. You can get these from your local database, or by using the prime API.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"># local</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --insecure fetch-mto-updates | jq --arg moveCode &lt;insert move locator&gt; &#x27;map(select(.moveCode == $moveCode)) | .[0] | {moveTaskOrderID: .id, mtoShipmentID: .mtoShipments[0].id}&#x27;</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"># staging</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --cac --hostname api.stg.move.mil --port 443 fetch-mto-updates | jq --arg moveCode &lt;insert move locator&gt; &#x27;map(select(.moveCode == $moveCode)) | .[0] | {moveTaskOrderID: .id, mtoShipmentID: .mtoShipments[0].id}&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Use this JSON template to make a file named create_ddfsit_service_item.json, filling in the move ID and shipment ID (which you can either get from your local database, or by calling <code>fetch-mto-updates</code>):</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token property" style="color:#5a9bcf">&quot;body&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;moveTaskOrderID&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;&lt;insert move ID&gt;&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;mtoShipmentID&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;&lt;insert shipment ID&gt;&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;modelType&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;MTOServiceItemDestSIT&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;reServiceCode&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;DDFSIT&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;timeMilitary1&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;1705Z&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;firstAvailableDeliveryDate1&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;2021-01-31&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;timeMilitary2&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;0719Z&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;firstAvailableDeliveryDate2&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;2021-02-03&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;sitEntryDate&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;2021-01-12&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;sitDepartureDate&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;2021-01-22&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Run this command to create DDFSIT, DDASIT, and DDDSIT service items, and generate a payload file for the next step:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"># local</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --insecure create-mto-service-item --filename create_ddfsit_service_item.json | jq &quot;map(select(.reServiceCode == \&quot;DDDSIT\&quot;))[0] | {mtoServiceItemId: .id, ifMatch: .eTag, body: {id: .id, modelType: \&quot;UpdateMTOServiceItemSIT\&quot;, sitDestinationFinalAddress: {streetAddress1: \&quot;20245 4th St\&quot;, city: \&quot;Albuquerque\&quot;, state: \&quot;NM\&quot;, postalCode: \&quot;87117\&quot;, country: \&quot;United States\&quot;}}}&quot; &gt; update_dddsit_service_item.json</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"># staging</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --cac --hostname api.stg.move.mil --port 443 create-mto-service-item --filename create_ddfsit_service_item.json | jq &quot;map(select(.reServiceCode == \&quot;DDDSIT\&quot;))[0] | {mtoServiceItemId: .id, ifMatch: .eTag, body: {id: .id, modelType: \&quot;UpdateMTOServiceItemSIT\&quot;, sitDestinationFinalAddress: {streetAddress1: \&quot;20245 4th St\&quot;, city: \&quot;Albuquerque\&quot;, state: \&quot;NM\&quot;, postalCode: \&quot;87117\&quot;, country: \&quot;United States\&quot;}}}&quot; &gt; update_dddsit_service_item.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you&#x27;ve already created the SIT service items (eg with the <code>pricing-acceptance</code> script, you can use information from <code>fetch-mto-updates</code> to generate the payload instead.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"># local</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --insecure fetch-mto-updates | jq --arg moveCode &lt;insert move locator&gt; &#x27;map(select(.moveCode == $moveCode)) | .[0] |  .mtoServiceItems | map(select(.reServiceCode == &quot;DDDSIT&quot;))[0] | {mtoServiceItemId: .id, ifMatch: .eTag, body: {id: .id, modelType: &quot;UpdateMTOServiceItemSIT&quot;, sitDestinationFinalAddress: {streetAddress1: &quot;20245 4th St&quot;, city: &quot;Albuquerque&quot;, state: &quot;NM&quot;, postalCode: &quot;87117&quot;, country: &quot;United States&quot;}}}&#x27; &gt; update_dddsit_service_item.json</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"># staging</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --cac --hostname api.stg.move.mil --port 443 fetch-mto-updates | jq --arg moveCode &lt;insert move locator&gt; &#x27;map(select(.moveCode == $moveCode)) | .[0] |  .mtoServiceItems | map(select(.reServiceCode == &quot;DDDSIT&quot;))[0] | {mtoServiceItemId: .id, ifMatch: .eTag, body: {id: .id, modelType: &quot;UpdateMTOServiceItemSIT&quot;, sitDestinationFinalAddress: {streetAddress1: &quot;20245 4th St&quot;, city: &quot;Albuquerque&quot;, state: &quot;NM&quot;, postalCode: &quot;87117&quot;, country: &quot;United States&quot;}}}&#x27; &gt; update_dddsit_service_item.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You should update the <code>sitDestinationFinalAddress</code> field in the generated file, <code>update_dddsit_service_item.json</code> if you require a specific address for the scenario that you&#x27;re testing.</p><p>Next, use the following command to use the generated file to update the DDDSIT service item with the new address.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"># local</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --insecure update-mto-service-item --filename update_dddsit_service_item.json</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"># staging</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --cac --hostname api.stg.move.mil --port 443 update-mto-service-item --filename update_dddsit_service_item.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Creating a Payment Request</h1><p>Get the MTO ID and the MTO Service Item IDs of any service items you want to include in the payment request, and put them in the body
of the request.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token property" style="color:#5a9bcf">&quot;body&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;isFinal&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;moveTaskOrderID&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;&lt;insert MTO ID&gt;&quot;</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token property" style="color:#5a9bcf">&quot;serviceItems&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#8dc891">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token property" style="color:#5a9bcf">&quot;id&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;&lt;insert first MTO service item ID&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token punctuation" style="color:#8dc891">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">        </span><span class="token property" style="color:#5a9bcf">&quot;id&quot;</span><span class="token operator" style="color:#d7deea">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;&lt;insert second MTO service item ID&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token punctuation" style="color:#8dc891">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">      ...</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">    </span><span class="token punctuation" style="color:#8dc891">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">  </span><span class="token punctuation" style="color:#8dc891">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"></span><span class="token punctuation" style="color:#8dc891">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can use <code>jq</code> and <code>fetch-mto-updates</code> to generate a request body that includes every service item.</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"># local</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --insecure fetch-mto-updates | jq --arg moveCode &lt;insert move code&gt; &#x27;map(select(.moveCode == $moveCode)) | .[0] | .id as $mto | .mtoServiceItems | map({id: .id}) | {body: {isFinal: false, moveTaskOrderID: $mto, serviceItems: .}}&#x27; &gt; create_payment_request.json</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"># staging</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --cac --hostname api.stg.move.mil --port 443 fetch-mto-updates | jq --arg moveCode &lt;insert move code&gt; &#x27;map(select(.moveCode == $moveCode)) | .[0] | .id as $mto | .mtoServiceItems | map({id: .id}) | {body: {isFinal: false, moveTaskOrderID: $mto, serviceItems: .}}&#x27; &gt; create_payment_request.json</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>And then use the request body to create a payment request:</p><div class="language-sh codeBlockContainer_Ckt0 theme-code-block" style="--prism-background-color:#282c34;--prism-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sh codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#ffffff"><span class="token plain"># local</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client create-payment-request --insecure --filename create_payment_request.json</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain"># staging</span><br></span><span class="token-line" style="color:#ffffff"><span class="token plain">prime-api-client --cac --hostname api.stg.move.mil --port 443 create-payment-request --insecure --filename create_payment_request.json</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h1>Approve payment request as TIO</h1><p>Log in as a TIO user in the same GBLOC as your move.</p><p>You should be able to see the SIT service items and pricing details.</p><p>You can check the pricing calculations using the instructions from <a href="/mymove-docs/docs/backend/testing/acceptance-testing-payment-requests">this document</a>.</p><p>If you want to send an invoice, approve some of the service items and the move, and then wait for the <code>process_edis</code> scheduled task to run.</p><h1>References</h1><p><a href="https://docs.google.com/document/d/1jRl91aslMnOMt2zS1tt_XT0lD1I-xvsiKOfprAaFrAs/edit#" target="_blank" rel="noopener noreferrer">SIT pricing discovery</a></p><p><a href="/mymove-docs/docs/backend/testing/acceptance-testing-payment-requests#add-sit-related-service-items">Add SIT related service items</a></p><ul><li>Has example payload and call for dom/origin first day SIT and no explanation</li></ul><p><a href="https://github.com/transcom/mymove/pull/6435" target="_blank" rel="noopener noreferrer">https://github.com/transcom/mymove/pull/6435</a></p><ul><li>explains the 3 pricing scenarios for destination SIT</li></ul><p><a href="https://github.com/transcom/mymove/pull/6417" target="_blank" rel="noopener noreferrer">https://github.com/transcom/mymove/pull/6417</a></p><ul><li>Use prime api demo to set up some sit service items</li><li>How to add DDASIT service item</li><li>Create a payment request for that service item</li><li>Screenshots for TIO view of the service item</li></ul><p><a href="https://github.com/transcom/mymove/pull/6402" target="_blank" rel="noopener noreferrer">https://github.com/transcom/mymove/pull/6402</a></p><ul><li>Use prime api demo to set up new move</li><li>Create DOFSIT service item with prime api client</li><li>Create payment request for service item</li><li>Screenshot of TIO view</li></ul><p><a href="https://github.com/transcom/mymove/pull/5823" target="_blank" rel="noopener noreferrer">https://github.com/transcom/mymove/pull/5823</a></p><ul><li>More detailed move creation instructions (eg talks about GBLOC, and more detail about what to do as TOO)</li><li>Create DOFSIT and explains how the tcreates other service items</li><li>Talks about the 3 zip scenarios and suggests testing them all</li><li>Links to SIT pricing notes doc: <a href="https://docs.google.com/document/d/1jRl91aslMnOMt2zS1tt_XT0lD1I-xvsiKOfprAaFrAs/edit#heading=h.od9n7nbhtjs5" target="_blank" rel="noopener noreferrer">https://docs.google.com/document/d/1jRl91aslMnOMt2zS1tt_XT0lD1I-xvsiKOfprAaFrAs/edit#heading=h.od9n7nbhtjs5</a></li></ul><p><a href="https://github.com/transcom/mymove/pull/5769" target="_blank" rel="noopener noreferrer">https://github.com/transcom/mymove/pull/5769</a></p><ul><li>Talks about updating DDDSIT with an address<ul><li>So you have to create it without an address, and then you later call update-mto-service-item with the new address</li></ul></li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/transcom/mymove-docs/edit/main/docs/backend/testing/testing-payment-requests-for-domestic-sit-service-items.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/mymove-docs/docs/backend/testing/testing-best-practices"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Testing best practices</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mymove-docs/docs/backend/testing/understanding-testdatagen-functions"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Understanding testdatagen functions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#domestic-sit-service-items" class="table-of-contents__link toc-highlight">Domestic SIT service items</a></li><li><a href="#distance-calculation" class="table-of-contents__link toc-highlight">Distance calculation</a></li><li><a href="#where-do-i-put-these-zips" class="table-of-contents__link toc-highlight">Where do I put these ZIPs?</a></li><li><a href="#example-zip-codes-for-testing" class="table-of-contents__link toc-highlight">Example ZIP codes for testing</a></li><li><a href="#create-origin-sit-service-items" class="table-of-contents__link toc-highlight">Create Origin SIT service items</a></li><li><a href="#create-destination-sit-service-items" class="table-of-contents__link toc-highlight">Create Destination SIT service items</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/about">About MilMove</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/adrs">Architecture Decision Records</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contributing</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/frontend">Frontend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/backend">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/api">API</a></li><li class="footer__item"><a class="footer__link-item" href="/mymove-docs/docs/tools">Tools</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/transcom/mymove-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">MilMove Documentation GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/transcom/mymove" target="_blank" rel="noopener noreferrer" class="footer__link-item">MilMove GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://6130eb5cde15830007fdf57b--docusaurus-2.netlify.app/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Docusaurus Official Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright 2023  U.S. Federal Government (in countries where recognized) and TrussWorks. Built with Docusaurus.</div></div></div></footer></div>
<script src="/mymove-docs/assets/js/runtime~main.cb78340e.js"></script>
<script src="/mymove-docs/assets/js/main.70764974.js"></script>
</body>
</html>